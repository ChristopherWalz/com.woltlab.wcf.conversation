define("WoltLabSuite/Core/Conversation/Ui/Participant/Add",["Ajax","Language","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Ui/ItemList/User"],function(t,e,a,i,n){"use strict";function s(t){this.init(t)}return s.prototype={init:function(e){this._conversationId=e,t.api(this,{actionName:"getAddParticipantsForm"})},_ajaxSetup:function(){return{data:{className:"wcf\\data\\conversation\\ConversationAction",objectIDs:[this._conversationId]}}},_ajaxSuccess:function(t){switch(t.actionName){case"addParticipants":this._handleResponse(t);break;case"getAddParticipantsForm":this._render(t)}},_handleResponse:function(t){t.returnValues.count&&i.show(t.returnValues.successMessage),a.close(this)},_render:function(t){a.open(this,t.returnValues.template);var e=document.getElementById("addParticipants");e.disabled=!0,n.init("participantsInput",{callbackChange:function(t,a){e.disabled=0===a.length},excludedSearchValues:t.returnValues.excludedSearchValues,maxItems:t.returnValues.maxItems}),e.addEventListener("click",this._submit.bind(this))},_submit:function(){for(var e=n.getValues("participantsInput"),a=[],i=0,s=e.length;s>i;i++)a.push(e[i].value);t.api(this,{actionName:"addParticipants",parameters:{participants:a}})},_dialogSetup:function(){return{id:"conversationAddParticipants",options:{title:e.get("wcf.conversation.edit.addParticipants")},source:null}}},s});